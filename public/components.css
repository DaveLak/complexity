.text-shadow-hover:hover {
  text-shadow: 0 0 10px var(--accent-foreground) !important;
}


/* Code line numbers */
body.markdown-block-line-numbers code {
  counter-reset    : step;
  counter-increment: step 0;
}

body.markdown-block-line-numbers code .line::before {
  content          : counter(step);
  counter-increment: step;
  width            : 1rem;
  margin-right     : 1.5rem;
  display          : inline-block;
  text-align       : right;
  color            : var(--foreground-darker);
}

body.markdown-block-line-numbers code .line:last-child::before {
  content: none;
}

/* Markdown Query Wrapper */
.my-md.md\:my-lg:has(textarea) #markdown-query-wrapper {
  display: none;
}

html.dark #markdown-query-wrapper pre code {
  color: var(--foreground) !important;
}

#markdown-query-wrapper pre {
  background  : var(--secondary);
  padding-left: 0.8rem;
  padding-top : 0.8rem;
  width       : 100% !important;
  max-width   : 90vw !important;
}

#markdown-query-wrapper pre code {
  color     : var(--foreground) !important;
  background: var(--secondary);
}

#markdown-query-wrapper pre.retracted {
  max-height: 200px;
}

/* Markdown block line numbers */
pre {
  counter-reset: line;
}

pre code.line:before {
  content          : counter(line);
  counter-increment: line;
  display          : inline-block;
  width            : 2.2em;
  color            : var(--muted-foreground);
  opacity          : .4;
}

/* Hide popper if their reference is hidden */
[data-popper-reference-hidden="true"] {
  display: none;
}

/* Thread layout adjustments */
html.dark .alternate-markdown-block div.w-full.max-w-\[90vw\]:has(> pre) {
  border: 1px solid var(--muted) !important;
}

body.alternate-markdown-block pre[data-lang="text"] code,
body.alternate-markdown-block pre[data-lang="markdown"] code {
  white-space: pre-wrap;
}

body.alternate-markdown-block div.w-full.max-w-\[90vw\]:has(> pre) {
  border       : 1px solid var(--foreground-darker) !important;
  margin       : 1rem 0;
  background   : var(--secondary);
  border-radius: calc(var(--radius) - 2px);
}

body.alternate-markdown-block .codeWrapper {
  padding-top   : 0 !important;
  padding-bottom: 0 !important;
  margin        : 0 !important;
  border        : none;
}

body.thread-message-sticky-toolbar .md\:grid.grid-cols-12.gap-xl:not(:has(.thread-message-toolbar-container)) {
  padding-top: 3.5rem !important;
}

body.thread-message-sticky-toolbar *:has(#markdown-query-wrapper:not(.\!tw-hidden))>.whitespace-pre-line.break-words {
  display: none;
}

body.thread-message-sticky-toolbar .md\:grid.grid-cols-12.gap-xl .mt-sm.flex.items-center.justify-between {
  display: none;
}

/* Adjust selectors border radius */
.grow.block:has(textarea[placeholder]) button:not([aria-label="Submit"]):not([data-testid="copilot-toggle"]).rounded-full {
  border-radius: 0.375rem !important;
}

body.alter-attach-button .grow.block:has(textarea[placeholder]) button:not([aria-label="Submit"]):not([data-testid="copilot-toggle"]).rounded-full {
  height: 2rem !important;
}

body.alter-attach-button .grow.block:has(textarea[placeholder]) button:not([aria-label="Submit"]):not([data-testid="copilot-toggle"]).rounded-full svg {
  width : .9rem !important;
  height: .9rem !important;
}

/* Adjust query box width */
.pointer-events-none.fixed.z-10>.pointer-events-auto.md\:col-span-8:has(textarea) {
  grid-column: span 12 / span 12 !important;
  z-index    : 20 !important;
}

@media (min-width: 768px) {
  .pointer-events-none.fixed.z-10 {
    bottom: .3rem !important;
  }
}

/* Collapse empty thread visual columns */
.collapse-empty-thread-visual-columns #visual-col {
  display    : none !important;
  grid-column: unset !important;
}

.collapse-empty-thread-visual-columns #message-block:has(#visual-col > div > div:nth-child(2)) #visual-col {
  display    : block !important;
  grid-column: span 4 / span 4 !important;
}

.collapse-empty-thread-visual-columns #text-col {
  grid-column: span 12 / span 12 !important;
}

.collapse-empty-thread-visual-columns #message-block:has(#visual-col > div > div:nth-child(2)) #text-col {
  grid-column: span 8 / span 8 !important;
}

/* Remove transitions and animations */
.grow:has(.grow.block),
#copilot-toggle,
.grow.block>div,
.grow.block>div>div {
  transition: none !important;
  animation : none !important;
  transform : none !important;
}

/* Styling for grow block */
.grow.block {
  border       : 1px solid var(--border-darker) !important;
  border-radius: calc(var(--radius) - 2px) !important;
  background   : var(--secondary);
  box-shadow   : 0 0 10px 0 rgba(0, 0, 0, 0.2) !important;
}

.grow.block>div>div {
  border-radius        : calc(var(--radius) - 2px) !important;
  display              : grid;
  grid-template-rows   : 1fr auto;
  grid-template-columns: repeat(3, minmax(0, 1fr));
}

.grow.block>div>div>div:first-child {
  grid-column-start: 1;
  grid-column-end  : 4;
  padding-bottom   : .5rem;
  order            : unset;
  border-radius    : unset;
}

.grow.block>div>div>div:nth-child(2) {
  grid-column-start: 1;
  grid-column-end  : 3;
  grid-row-start   : 2;
  order            : unset;
}

.grow.block>div>div>div:last-child {
  grid-column-start: 3;
  grid-row-start   : 2;
  order            : unset;
}